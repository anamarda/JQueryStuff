<!DOCTYPE>
<html>

<head>
    <style>
        table {
            border-spacing: 0;
            padding: 12px;
        }

        td {
            padding: 12px;
            font-size: 20px;
            border-top: 1px solid grey;
        }

    </style>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	
<script>
    $(document).ready(function(){	
	
		//initialize the board
        var table = $('#tabel');
		var a = new Array(16);

        var k = 0;
        for (var i = 0; i < 16; i++) {
            a[i] = k++;
        }

        for (var i = 0; i < 16; i++) {
			var r = Math.floor((Math.random() * 16));
            var aux = a[i];
            a[i] = a[r];
            a[r] = aux;
        }

		var mat = new Array(4);
        for (var i = 0; i < 10; i++) {
            mat[i] = new Array(4);
        }

        k = 0;
		
		//position of the empty square
		var row;
		var col;
		
        for (var i = 0; i < 4; i++) {
			for (var j = 0; j < 4; j++) {
				mat[i][j] = a[k++];
				if(mat[i][j] != 0){	
					table.find('tr:eq('+i+')').find('td:eq('+j+')').html(mat[i][j]);
				}
				else{
					table.find('tr:eq('+i+')').find('td:eq('+j+')').html("");
					row = i;
					col = j;
				}
			}
        }

        $('html').keydown(function(e){
			if(e.which == '40'){
				//down
				if(row < 3){
					var rowVal = row + 1;
					var val = table.find('tr:eq('+ rowVal +')').find('td:eq('+col+')').html();
					table.find('tr:eq('+row+')').find('td:eq('+col+')').html(val);
					table.find('tr:eq('+rowVal+')').find('td:eq('+col+')').html("");
					
					row = rowVal;
				}
			}
			
			if(e.which == '38'){
				//up
				if(row > 0){
					var rowVal = row - 1;
					var val = table.find('tr:eq('+ rowVal +')').find('td:eq('+col+')').html();
					table.find('tr:eq('+row+')').find('td:eq('+col+')').html(val);
					table.find('tr:eq('+rowVal+')').find('td:eq('+col+')').html("");
					
					row = rowVal;
				}
			}
			
			if(e.which == '39'){
				//right
				if(col < 3){
					var colVal = col + 1;
					var val = table.find('tr:eq('+ row +')').find('td:eq('+colVal+')').html();
					table.find('tr:eq('+row+')').find('td:eq('+col+')').html(val);
					table.find('tr:eq('+row+')').find('td:eq('+colVal+')').html("");
					
					col = colVal;
				}
			}
			
			if(e.which == '37'){
				//left
				if(col > 0){
					var colVal = col - 1;
					var val = table.find('tr:eq('+ row +')').find('td:eq('+colVal+')').html();
					table.find('tr:eq('+row+')').find('td:eq('+col+')').html(val);
					table.find('tr:eq('+row+')').find('td:eq('+colVal+')').html("");
					
					col = colVal;
				}
			}
		});    
	});
</script>
</head>

<body>
    <table id="tabel">
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
</body>

</html>
